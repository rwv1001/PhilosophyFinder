<!DOCTYPE html>

<html>
<%= stylesheet_link_tag "application" %>
<%= javascript_include_tag "application", "data-turbolinks-track" => true %>
<head>
  <title>St. Thomas the Search Engine</title>
  <%= csrf_meta_tags %>
  <% if  current_user == nil %>
  <script src='https://www.google.com/recaptcha/api.js'></script>
  <% end %>

</head>

<body>
<% @result_str = "" %>
<div class="sidemenu">
  <%= render 'users/user_header', current_user: current_user %>
  <% flash.each do |message_type, message| %>
      <div class="alert alert-<%= message_type %>"><%= message %></div>
  <% end %>
  <% if current_user %>

      <div class="domain-crawler">
        <%= render 'domain_crawlers/domain_summary', args: {:selected => DOMAIN_ACTION[:select_action]}  %>
        <%= render 'domain_crawlers/new_domain_form', args: {:user_id => current_user.id, :domain_crawler => DomainCrawler.new} %>
        <%= render 'domain_crawlers/new_search_form', args: {:user_id => current_user.id} %>
        <%= render 'domain_crawlers/old_search_form', args: {:user_id => current_user.id} %>
        <%= render 'domain_crawlers/groups', args: {:selected => GROUP_ACTION[:select_action]} %>
      </div>



  <% end %>
  <%= yield %>


</div>

  <div class="menu-div">
    <div  class="menu-tab-container"><div class="menu-tab-search"  onclick="ShowSearchResults()" > </div></div>
    <div  class="menu-tab-container"><div class="menu-tab-groups"   onclick="ShowGroupResults()" > </div></div>
    <div  class="menu-tab-container"><div class="menu-tab-help"   onclick="ShowHelp()" > </div></div>
    <div  class="menu-tab-container"><div class="menu-tab-dominicans"   onclick="ShowDominicans()" > </div></div>
  </div>
<div class="main-panel">
  <div class="main-panel-content">

    <div id="instructions">

      <h2> Functionality</h2>
      <p> This web application allows you to search through the works of Aquinas in both English and Latin. It allows you to do proximity word searches. For each result found,
        the paragraph containing the result will be displayed together with a link to the website where the full text can be found. Furthermore, if desired, one can save and categorize
        results in user defined groups of results.
      </p>
      <h2> Motivation </h2>
      <p>
        The main reason I wrote this web application was to implement the proximity word search functionality. Most major search engines already have a proximity word search facility where one can
         search for pages which contain the specified words within a certain separation from each other. However, once the page is found by these search engines, it is not easy to
        actually find all the instances in the page where these two words occur near each other. My web application therefore displays each complete paragraph where such
        instances occur. Before I wrote this web application, I had been doing such proximity searches on a huge text file containing many of Aquinas' works. I
        used what are called regular expressions to find particular instances. I found that these proximity searches produced extremely relevant results. However, using regular
        expressions was rather cumbersome and not the sort of technique I could easily teach other Thomists who might find proximity searches useful. Therefore, I wrote this
        web application as a more user friendly way of doing proximity searches.
      </p>
      <h2> Instructions </h2>
      <p>
        (1) If you have not already done so, click on 'Sign Up' to create a user account. Otherwise click on 'Log in' <br>
        (2) Make sure you have selected some pages to search by clicking on the checkboxes in the 'Domain Summary' pane.<br>
        (3) In the 'New Search' pane, fill any one of the word1 to word4 text fields with words you would like to find near to each other. You can specify the separation
        of the words by using the drop down menu. You can specify wild cards by using the '%' character. You can use the 'OR' keyword within a text field to specify
        different alternatives you would like to find. You can also search for exact phrase. For example, you could set the following:
      <ul>
        <li>word1: Sacred Scripture</li>
        <li>word2: love% OR desire% </li>
      </ul> <br>
      This search for the exact phrase "Sacred Scripture" near words such as love, loves, loved, desire, desires, desired etc. Here is one of the results: <span class="highlight">Sacred Scripture</span> likewise records the <span class="highlight">love</span> of God: “He hath <span class="highlight">loved</span> the people” (Deut. 33:3); “I have <span class="highlight">loved</span> you with an everlasting <span class="highlight">love</span>” (Jer. 31:3); “For the Father Himself <span class="highlight">loves</span>
      you” (John 16:27).  Certain philosophers likewise made God’s love to be
      the principle of things.  With this view the words of Dionysius agree
      when he says that “the divine love did not allow Him to be without
      offspring” [De div. nom. IV, 11].     <br>
      (4) If desired, you can create groups of results that you can save for later reference. To do so, do the following: (a) click on the 'New Group'
      drop down menu item in the 'Groups' pane. (b) Select the directory you would like it to be in by selecting a radio button.
      (c) Use the text field to enter an appropriate group name. (d) Create the group by clicking on 'Create Group' (e) Do a search. (f) Among the search results,
      click on the corresponding check boxes if you want to add the search results to the group. (g) Click on 'Add Search Results' drop down menu item in the
      'Groups' pane. (h) Click on the 'add results' link next to the group you want to add the results to.<br><br>
      </p>

      <h2> Further Developments</h2>

      There are a number of bugs in this application and I would also like to implement some further functionality.

      <h3>Further Functionality</h3>

      <ul>
        <li>1. Add the other philosophers. </li>
        <li>2. Allow users to add private comments to a search result.</li>
        <li>3. Allow users to upload pdfs which they want to search. (This may be tricky)</li>
        <li>4. Autogenerate bibliographies in a variety of formats</li>
      </ul>
      </p><br><br><br><br><br>
      <p>
      If you notice any other bugs or functionality you would like this web application to provide, please contact searchstthomas@english.op.org.
      Thank you for your patience.
      </p>
      <br><br><br><br><br><br>

    </div>
    <div id="search-results" ></div>
    <div id="group-results"></div>
  </div>
</div>
</body>
</html>
